{% load static %}
<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Dashboard</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- favicon
		============================================ -->
  <link rel="shortcut icon" type="image/x-icon" href="{% static 'blueworks/img/logo/blueworks.png' %}">
  <!-- Google Fonts
		============================================ -->
  <link href="https://fonts.googleapis.com/css?family=Play:400,700" rel="stylesheet">
  <!-- Bootstrap CSS
		============================================ -->
  <link rel="stylesheet" href="{% static 'blueworks/css/bootstrap.min.css' %}">
  <!-- Bootstrap CSS
		============================================ -->
  <link rel="stylesheet" href="{% static 'blueworks/css/font-awesome.min.css' %}">
  <!-- owl.carousel CSS
		============================================ -->
  <link rel="stylesheet" href="{% static 'blueworks/css/owl.carousel.css' %}">
  <link rel="stylesheet" href="{% static 'blueworks/css/owl.theme.css' %}">
  <link rel="stylesheet" href="{% static 'blueworks/css/owl.transitions.css' %}">
  <!-- animate CSS
		============================================ -->
  <link rel="stylesheet" href="{% static 'blueworks/css/animate.css' %}">
  <!-- normalize CSS
		============================================ -->
  <link rel="stylesheet" href="{% static 'blueworks/css/normalize.css' %}">
  <!-- main CSS
		============================================ -->
  <link rel="stylesheet" href="{% static 'blueworks/css/main.css' %}">
  <!-- morrisjs CSS
		============================================ -->
  <link rel="stylesheet" href="{% static 'blueworks/css/morrisjs/morris.css' %}">
  <!-- mCustomScrollbar CSS
		============================================ -->
  <link rel="stylesheet" href="{% static 'blueworks/css/scrollbar/jquery.mCustomScrollbar.min.css' %}">
  <!-- metisMenu CSS
		============================================ -->
  <link rel="stylesheet" href="{% static 'blueworks/css/metisMenu/metisMenu.min.css' %}">
  <link rel="stylesheet" href="{% static 'blueworks/css/metisMenu/metisMenu-vertical.css' %}">
  <!-- calendar CSS
		============================================ -->
  <link rel="stylesheet" href="{% static 'blueworks/css/calendar/fullcalendar.min.css' %}">
  <link rel="stylesheet" href="{% static 'blueworks/css/calendar/fullcalendar.print.min.css' %}">
  <!-- style CSS
		============================================ -->
  <link rel="stylesheet" href="{% static 'blueworks/style.css' %}">
  <!-- responsive CSS
		============================================ -->
  <link rel="stylesheet" href="{% static 'blueworks/css/responsive.css' %}">
  <!-- jquery
		============================================ -->
  <script src="{% static 'blueworks/js/vendor/jquery-1.11.3.min.js' %}"></script>
  <style type="text/css">
    .stats {
      max-width: 800px;
      max-height: 800px;
      margin: 0 auto
    }
  </style>
  <!-- modernizr JS
		============================================ -->
  <script src="{% static 'blueworks/js/vendor/modernizr-2.8.3.min.js' %}"></script>
</head>

<body>
  <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

  <div class="color-line"></div>
  <div class="container-fluid">
    <div class="row">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="back-link back-backend">
          <button id='dash' class="btn btn-primary">Back to Home</button>
        </div>
      </div>
    </div>
  </div>
  <div class="container-fluid">
    <div class="row">
      <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12"></div>
      <div class="col-md-6 col-md-6 col-sm-6 col-xs-12">
        <div id="container" class="stats"></div>
      </div>
      <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12"></div>
    </div>
    <div class="row">
      <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12"></div>
      <div class="col-md-6 col-md-6 col-sm-6 col-xs-12" id="second">
      </div>
      <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12"></div>
    </div>
    <div class="row">
      <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12"></div>
      <div class="col-md-6 col-md-6 col-sm-6 col-xs-12">
        <div id="third" class="stats"></div>
      </div>
      <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12"></div>
    </div>
    <div class="row">
      <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12"></div>
      <div class="col-md-6 col-md-6 col-sm-6 col-xs-12">
        <div id="fourth" class="stats"></div>
      </div>
      <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12"></div>
    </div>
    <div class="row">
      <div class="col-md-12 col-md-12 col-sm-12 col-xs-12 text-center login-footer">
        <p>Copyright Â© 2019 <a href="https://colorlib.com/wp/templates/">BlueWorkS</a> All rights reserved.
          <br>By Kimia technologies</p>
      </div>
    </div>
  </div>

  <!-- bootstrap JS
		============================================ -->
  <script src="{% static 'blueworks/js/bootstrap.min.js' %}"></script>
  <!-- wow JS
		============================================ -->
  <script src="{% static 'blueworks/js/wow.min.js' %}"></script>
  <!-- price-slider JS
		============================================ -->
  <script src="{% static 'blueworks/js/jquery-price-slider.js' %}"></script>
  <!-- meanmenu JS
		============================================ -->
  <script src="{% static 'blueworks/js/jquery.meanmenu.js' %}"></script>
  <!-- owl.carousel JS
		============================================ -->
  <script src="{% static 'blueworks/js/owl.carousel.min.js' %}"></script>
  <!-- sticky JS
		============================================ -->
  <script src="{% static 'blueworks/js/jquery.sticky.js' %}"></script>
  <!-- scrollUp JS
		============================================ -->
  <script src="{% static 'blueworks/js/jquery.scrollUp.min.js' %}"></script>
  <!-- mCustomScrollbar JS
		============================================ -->
  <script src="{% static 'blueworks/js/scrollbar/jquery.mCustomScrollbar.concat.min.js' %}"></script>
  <script src="{% static 'blueworks/js/scrollbar/mCustomScrollbar-active.js' %}"></script>
  <!-- counterup JS
		============================================ -->
  <script src="{% static 'blueworks/js/counterup/jquery.counterup.min.js' %}"></script>
  <script src="{% static 'blueworks/js/counterup/waypoints.min.js' %}"></script>
  <script src="{% static 'blueworks/js/counterup/counterup-active.js' %}"></script>
  <!-- metisMenu JS
		============================================ -->
  <script src="{% static 'blueworks/js/metisMenu/metisMenu.min.js' %}"></script>
  <script src="{% static 'blueworks/js/metisMenu/metisMenu-active.js' %}"></script>
  <!-- morrisjs JS
		============================================ -->
  <script src="{% static 'blueworks/js/sparkline/jquery.sparkline.min.js' %}"></script>
  <script src="{% static 'blueworks/js/sparkline/jquery.charts-sparkline.js' %}"></script>
  <!-- calendar JS
		============================================ -->
  <script src="{% static 'blueworks/js/calendar/moment.min.js' %}"></script>
  <script src="{% static 'blueworks/js/calendar/fullcalendar.min.js' %}"></script>
  <script src="{% static 'blueworks/js/calendar/fullcalendar-active.js' %}"></script>
  <!-- tab JS
		============================================ -->
  <script src="{% static 'blueworks/js/tab.js' %}"></script>
  <!-- plugins JS
		============================================ -->
  <script src="{% static 'blueworks/js/plugins.js' %}"></script>
  <!-- main JS
		============================================ -->
  <script src="{% static 'blueworks/js/main.js' %}"></script>
  <script src="{% static 'blueworks/js/highchart/highcharts.js' %}"></script>
  <script src="{% static 'blueworks/js/highchart/highcharts-3d.js' %}"></script>
  <script src="{% static 'blueworks/js/highchart/exporting.js' %}"></script>
  <script src="{% static 'blueworks/js/highchart/export-data.js' %}"></script>
  <script type="text/javascript">
    (function ($) {
      function plot_one(data, params) {
        Highcharts.chart(params.cible, {
          chart: {
            type: params.type
          },
          title: {
            text: 'revenu per month'
          },
          legend: {
            layout: 'vertical',
            align: 'left',
            verticalAlign: 'top',
            x: 150,
            y: 100,
            floating: true,
            borderWidth: 1,
            backgroundColor: Highcharts.defaultOptions.legend.backgroundColor || '#FFFFFF'
          },
          xAxis: {
            categories: [
              'Jan', 'Feb', 'Mar', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct',
              'Nov', 'Dec'
            ],
          },
          yAxis: {
            title: {
              text: 'montant (XAF)'
            }
          },
          tooltip: {
            shared: true,
            valueSuffix: 'XAF'
          },
          credits: {
            enabled: false
          },
          plot_oneOptions: {
            areaspline: {
              fillOpacity: 0.5
            }
          },
          series: Array(data)
        });
      }

      function confront(data) {
        Highcharts.chart('third', {
          title: {
            text: 'Employer stats per month'
          },
          yAxis: {
            title: {
              text: 'montant (XAF)'
            }
          },
          legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle'
          },
          xAxis: {
            categories: [
              'Jan', 'Feb', 'Mar', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct',
              'Nov', 'Dec'
            ],
          },
          series: data,
          plotOptions: {
            line: {
              dataLabels: {
                enabled: true
              },
              enableMouseTracking: false
            }
          },
          responsive: {
            rules: [{
              condition: {
                maxWidth: 500
              },
              chartOptions: {
                legend: {
                  layout: 'horizontal',
                  align: 'center',
                  verticalAlign: 'bottom'
                }
              }
            }]
          }
        });
      }

      function plot_3d(data) {
        Highcharts.chart('fourth', {
          chart: {
            type: 'pie',
            options3d: {
              enabled: true,
              alpha: 45,
              beta: 0
            }
          },
          title: {
            text: 'Type revenu in one year'
          },
          tooltip: {
            pointFormat: '{series.name}: <b>{point.y} (XAF)</b><br>{point.percentage:.1f}%'
          },
          plotOptions: {
            pie: {
              allowPointSelect: true,
              cursor: 'pointer',
              depth: 35,
              dataLabels: {
                enabled: true,
                format: '{point.name}'
              }
            }
          },
          series: data
        });
      }

      $(document).load(
        $.getJSON('/blueworks/stats/general/', function (data) {
          var revenusData = Array.from({
            length: 12
          }, () => 0);
          data.map(rev => {
            revenusData[rev.mois - 1] = rev.revenu;
          });
          plot_one({
            name: 'revenu annuel',
            data: revenusData
          }, {
            cible: 'container',
            type: 'areaspline'
          });
        }), $.getJSON('/blueworks/stats/animateur/', function (data) {
          data.map(anim => {
            $('#second').append($('<div class="stats"></div>').attr('id', anim.nom));
            var revenusData = Array.from({
              length: 12
            }, () => 0);
            anim.stats.map(rev => {
              revenusData[rev.mois - 1] = rev.revenu;
            });
            plot_one({
              name: 'revenu ' + anim.nom,
              data: revenusData
            }, {
              cible: anim.nom,
              type: 'column'
            });
          });
          var to_plot = [];
          data.map(anim => {
            var revenusData = Array.from({
              length: 12
            }, () => 0);
            anim.stats.map(rev => {
              revenusData[rev.mois - 1] = rev.revenu;
            });
            to_plot.push({
              'name': anim.nom,
              'data': revenusData
            });
          });
          confront(to_plot);
        }), $.getJSON('/blueworks/stats/type/', function (data) {
          var revenusData = [];
          data.map(rev => {
            revenusData.push([rev.nom, rev.stats]);
          });
          plot_3d([{
            type: 'pie',
            name: 'revenu',
            data: revenusData
          }]);
        })
      );
    })(jQuery);
  </script>
</body>

</html>